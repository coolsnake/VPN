CentOS7修改Linux服务器SSH端口的方法

一般我们选择和购买的Linux VPS/服务器默认ROOT端口都是22，理论上在实际的使用过程中需要将22端口修改成其他的，这样可以确保一定的安全。在我们操作过程中会发现以前熟悉的centOS6与centOS7还是有不小的区别的。在这篇文章中，老左将记录centOS7系统下如何修改服务器SSH端口默认的22。

有些一键包WEB环境是在安装向导过程中帮助修改SSH端口的，这个操作后就没有必要再去修改，如果默认其他的面板、一键包WEB，还是需要修改一下确保安全。

第一、准备安全须知

1、如果没有操作过的网友，建议尝试学习修改端口的时候，一定要在新服务器中没有网站文件或者其他数据的情况下。这样即便操作失误也不至于导致系统进不去数据风险。（有些时候各种可能都会存在）

2、如果数据重要可以先备份或者快照备份等确保数据的安全存放再去修改端口。

3、检查SElinux是否关闭

    sestatus

检查命令，输入看到是disable状态才行，要不需要先关闭掉，防止出现问题。

第二、修改SSH端口步骤

1、修改/etc/ssh/sshd_config配置文件

如果我们不熟悉vi命令，就老老实实下载到本地然后修改。我们默认看到的是"# Port 22"，需要先将#去掉，然后再起一行添加一个设置的端口数字。可以设置数字建议1000-60000，尽量的不要与其他项目冲突。

PS：我们不要直接将22去掉，防止后面新端口登录不上，我们先22保留，一切没问题之后再删除。

2、放行端口

    firewall-cmd --permanent --zone=public --add-port=10086/tcp
    firewall-cmd --reload

这里红字部分是我们设置的端口，需要放行。如果有出现"FirewallD is not running"问题可以参考"解决CentOS7出现的"Failed to start firewalld.service"问题"解决，没有启动导致的。

3、检查端口是否开启

    firewall-cmd --permanent --query-port=10086/tcp
    
4、重启SSH服务

    systemctl restart sshd.service

重启之后，我们尝试下新的端口是否可以登入。如果可以登入再去编辑文件将22端口的一行编辑#掉或者删除，编辑之后肯定还需要重启SSH服务才可以生效。如果还不放心，在正式项目之前，我们可以重启服务器，然后再试试新端口是否可以登入。

总之，解决问题方法网上都有很多，唯独需要注意的就是修改端口之前原来的端口不要开始就删除，等新端口没有问题再去删除老端口。

本文固定链接: http://www.laozuo.org/11261.html
